_EXIT = 1
_PRINTF = 127

.SECT .TEXT

MAIN:
	MOV	BP,SP
	PUSH	S
	CALL	LUN
	PUSH	(X)
	CALL	OCC
	MOV	SP,BP
	PUSH	0
	PUSH	_EXIT
	SYS

LUN:
	PUSH	BP
	MOV	BP,SP
	MOV	DI,4(BP)
	MOV	CX,-1
	MOV	AX,0
	REPNZ	SCASB
	NEG	CX
	DEC	CX
	PUSH	CX	! CONTROLLO LUNGHEZZA
	PUSH	stringl
	PUSH	_PRINTF
	SYS
	MOV	SP,BP	! FINE CONTROLLO
	POP	BP
	RET

OCC:
	PUSH	BP
	MOV	BP,SP
	MOV	AX,4(BP)! PERPARAZIONE PARAMETRI
	MOV	DI,6(BP)
	MOV	DX,0	! PREPARAZIONE VERIABILI INTERNE
1:	REPNZ	SCASB
	CMP	CX,0
	JE	2f
	ADD	DX,1
	JMP	1b
2:	PUSH	DX
	PUSH	string
	PUSH	_PRINTF
	SYS
	MOV	SP,BP
	POP	BP
	RET

.SECT .DATA

S:	.ASCIZ	"A STRINGA DA ANALIZZAREA"
X:	.BYTE	'A'
string:	.ASCIZ	"n volte = %d, mi aspetto 7\n"
stringl:.ASCIZ	"lung = %d, mi aspetto 25\n"

.SECT .BSS
