_EXIT = 1
_PRINTF = 127

.SECT .TEXT

MAIN:
	MOV	BP,SP
	PUSH	N
	CALL	LUN
	CALL	COM
	MOV	SP,BP
	PUSH	0
	PUSH	_EXIT
	SYS

LUN:
	PUSH	BP
	MOV	BP,SP
	MOV	SI,4(BP)
	MOV	BX,0
1:	LODS
	CMP	AX,0
	JE	2f
	ADD	BX,1
	JMP	1b
2:	PUSH	BX
	PUSH	string
	PUSH	_PRINTF
	SYS
	MOV	SP,BP
	POP	BP
	RET

COM:
	PUSH	BP
	MOV	BP,SP
	MOV	SI,4(BP)
	MOV	DI,M
	MOV	CX,BX
1:	LODS
	MOV	(DI),AX
	PUSH	(DI)	! CONTROLLO COPIA
	PUSH	string2
	PUSH	_PRINTF
	SYS
	MOV	SP,BP	! FINE CONTROLLO
	NEG	(DI)
	PUSH	(DI)	! CONTROLLO NEGAZIONE
	PUSH	string2
	PUSH	_PRINTF
	SYS
	MOV	SP,BP	! FINE CONTROLLO
	ADD	DI,2
	LOOP	1b
	POP	BP
	RET

.SECT .DATA

N:	.WORD	1,2,3,4,0
M:	.WORD	0,0,0,0,0
string:	.ASCIZ	"LUNG = %d\n"
string2:.ASCIZ	"ELEM = %d\n"

.SECT .BSS

